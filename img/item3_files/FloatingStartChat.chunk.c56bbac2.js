(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[87],{1280:function(t,e,a){"use strict";a.r(e),a.d(e,"TrackableFloatingStartChat",(function(){return v}));var n=a(0),c=a(5),i=a.n(c),r=a(13),s=a.n(r),o=a(1),u=a.n(o),l=a(19),d=a(36),m=a(357),h=a(22),p=a(60),y=a(8),g=a(57),M=a(152),I=a(1445),f=a(2629),N=a.n(f);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=E(t);if(e){var c=E(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return L(this,a)}}function L(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(s,t);var e,a,c,r=C(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=r.call(this,t)).setRef=function(t){e.props.innerRef(t)},e.setBrandChatContext=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){try{var n=JSON.parse(t);n.products=u()(e.props,"pageContext.trackingDataV2.sproduct"),Object(m.e)(n),Object(m.d)(e.context.router.push,I.a.BRAND),a.impressionId&&h.a.trackEvent({en:"DCC",iid:a.impressionId,ct:a.contentType||"",p:a.position||e.props.position},!0)}catch(t){e.showContextErrorToast()}}},e.showContextErrorToast=function(){e.context.toast&&e.context.toast.show({message:Object(y.d)("genericError"),ttl:6e3,level:g.a.ERROR})},e.state={isCompareActive:t.productList.length>0},e}return e=s,(a=[{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=t.productList.length;e!==this.props.productList.length&&this.setState({isCompareActive:e>0})}},{key:"render",value:function(){var t=this.props.widget,e=this.state.isCompareActive;if(!t||!t.data)return null;var a,c,r,s=u()(t.data,"announcement"),o=u()(s,"action.params.pingContext"),l=u()(s,"value.title"),m=u()(s,"value.imageValue.dynamicImageUrl"),h=u()(s,["action","tracking"]);return n.createElement("div",{className:i()(N.a["chat-container"],(a={},c=N.a["chat-container-with-compare"],r=e,c in a?Object.defineProperty(a,c,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[c]=r,a)),ref:this.setRef},l&&o?n.createElement(p.a,{className:N.a["start-chat-button"],onClick:this.setBrandChatContext(o,h)},m?n.createElement("img",{src:Object(d.c)(m,112),className:N.a["chat-icon"]}):null,l):null)}}])&&b(e.prototype,a),c&&b(e,c),s}(n.Component);D.contextTypes={router:s.a.object,toast:s.a.object};var v=Object(M.c)(D,M.b.DCI,(function(t){return u()(t,["widget","data","announcement","tracking"])}));e.default=Object(l.b)((function(t){return{productList:t.compareWidgetData}}))(v)},1445:function(t,e,a){"use strict";a.d(e,"a",(function(){return Ot}));var n,c=a(0),i=a(5),r=a.n(i),s=a(1),o=a.n(s),u=a(141),l=a.n(u),d=a(114),m=a.n(d),h=a(13),p=a.n(h),y=a(28),g=a(547),M=a(121),I=a(357),f=a(36),N=a(124),j=a(2),b=a(34),S=a(15),C=a(22),L=a(8),E=a(537),D=a(71),v=a(1087),A=a(24),T=a(518),w=a(26),P=a(264),O=a(19),x=a(260),z=a(70),k=a(516),R=a(355),Z=a(60),Y=a(59),B=a(263),_=a(366),G=a(102),Q=a.p+"fk-cp-zion/img/empty-cart-illustration_765111.jpg",W=a.p+"fk-cp-zion/img/empty-wishlist-illustration_0f2661.jpg",H=a(1461),U=a.n(H);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(){return(V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function J(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=$(t);if(e){var c=$(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return q(this,a)}}function q(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.CART="CART",t.WISHLIST="WISHLIST",t.RECENT="RECENT"}(n||(n={}));var tt=n,et=tt.CART,at=tt.WISHLIST,nt=tt.RECENT,ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(s,t);var e,a,n,i=X(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this,t)).getProductIds=function(){var t=e.props,a=t.modalType,n=t.cartPids,c=t.wishlistPids;switch(a){case et:return n;case at:return c;case nt:return e.recentPids;default:return[]}},e.getProductFrom=function(){switch(e.props.modalType){case et:return"Cart";case at:return"Wishlist";case nt:return"Recently Viewed";default:return""}},e.fetchProducts=function(t){var a=t.map((function(t){return{productId:t}}));e.props.fetchProductSummary(a)},e.fetchNextProducts=function(){var t=e.getProductIds();if(20*e.page<t.length){var a=t.slice(20*e.page,20*e.page+20);e.page++,a&&a.length>0&&(e.fetchProducts(a),e.currentPids=e.currentPids.concat(a))}},e.handleProductSelectionChange=function(t){return function(a){var n=e.state.selectedProducts;a.checked?-1===n.indexOf(t)&&n.push(t):n=e.state.selectedProducts.filter((function(e){return e!==t})),e.setState({selectedProducts:n})}},e.onSendProducts=function(){e.props.onSendProducts(e.getProducts(e.state.selectedProducts)),e.hideProductsModal()},e.isProductSelected=function(t){return e.state.selectedProducts.indexOf(t.id)>-1},e.getProducts=function(t){var a=e.props.productsData;return t.map((function(t){return t&&a[t]&&a[t].value})).filter((function(t){return!!t}))},e.isLoading=function(t){return t.some((function(t){return Object(j.h)(t)||Object(j.i)(t)}))},e.isError=function(t){return t.some((function(t){return Object(j.g)(t)}))},e.isSuccess=function(t){return t.some((function(t){return Object(j.j)(t)}))},e.hideProductsModal=function(){e.setState({selectedProducts:[]})},e.renderModalState=function(t){return e.isLoading(t)?c.createElement(Y.a,{className:U.a["loader-state"]}):e.isError(t)?c.createElement(B.a,{className:U.a["error-state"]}):e.state.hasMore&&e.isSuccess(t)?c.createElement("div",{className:U.a["load-more"],onClick:e.fetchNextProducts},c.createElement(w.a,{strKey:"chatAttachProductLoadMore"})):0===t.length?e.props.modalType!==et&&e.props.modalType!==at?null:c.createElement("div",{className:U.a["empty-product-list"]},c.createElement("img",{className:U.a["empty-product-list-image"],src:e.props.modalType===et?Q:W}),c.createElement(w.a,{strKey:"chatEmptyProductList",attributes:{name:e.getProductFrom()},className:U.a["empty-product-list-text"]}),c.createElement(w.a,{strKey:"chatEmptyProductListSubtext",attributes:{name:e.getProductFrom().toLowerCase()},className:U.a["empty-product-list-subtext"]})):void 0},e.renderProducts=function(t){return t.map((function(t){var a=t.id,n=t.media,i=t.pricing,r=t.titles,s=t.buyability,u=c.createElement("div",{className:U.a.product},c.createElement("div",{className:U.a.details},c.createElement("div",{className:U.a["main-title"]},r.title),c.createElement("div",{className:U.a.pricing},c.createElement(x.a,{pricing:i}))),c.createElement("div",{className:U.a["product-image"]},c.createElement(z.a,{src:Object(f.c)(o()(n,["images",0,"url"]),"200")}),c.createElement(k.a,V({},s,{className:U.a["product-buyability"]}))));return c.createElement("div",{key:a,className:U.a["product-container"]},c.createElement(R.a,{key:a,label:u,iconClass:U.a["product-checkbox"],onChange:e.handleProductSelectionChange(a),checked:e.isProductSelected(t)}))}))},e.state={selectedProducts:[],hasMore:!1},e.page=0,e.currentPids=[],e.recentPids=G.c.getBrowsedPids(),e}return e=s,(a=[{key:"componentDidMount",value:function(){this.fetchNextProducts()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.getProductIds(),a=t.productsData,n=e.map((function(t){return a[t]})).filter((function(t){return!!t}));this.isSuccess(n)&&this.setState({hasMore:e.length>this.currentPids.length})}},{key:"render",value:function(){var t,e,a,n=this.state.selectedProducts,i=this.getProductFrom(),s=this.props.productsData,o=this.currentPids.map((function(t){return s[t]}));return c.createElement("div",{className:r()(U.a["add-product-modal"],(t={},e=U.a["empty-product-list-modal"],a=0===o.length,e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t))},c.createElement("div",{className:U.a.title},c.createElement(w.a,{strKey:"chatAddProductTitle",attributes:{from:i}})),c.createElement("div",{className:U.a["products-container"]},this.renderProducts(this.getProducts(this.currentPids)),this.renderModalState(o)),o.length>0&&c.createElement(Z.a,{primary:!0,type:"submit",className:U.a["btn-send"],onClick:this.onSendProducts,disabled:n&&0===n.length},c.createElement(w.a,{strKey:"cartSendProduct"})))}}])&&J(e.prototype,a),n&&J(e,n),s}(c.Component),it={fetchProductSummary:_.d},rt=Object(O.b)((function(t){return{cartPids:(o()(t.userState,["cart","items"])||[]).map((function(t){return t.pid})),wishlistPids:o()(t.userState,["wishlist","productIds"])||[],productsData:t.productSummary}}),it)(ct),st=a(1462),ot=a.n(st);function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function dt(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=yt(t);if(e){var c=yt(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return pt(this,a)}}function pt(t,e){return!e||"object"!==ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(u,t);var e,a,i,s=ht(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t)).setRef=function(t){return e.element=t},e.handleSendMessageClick=function(){var t=e.state,a=t.message,n=t.isValidMessage,c=o()(e.props,"networkStatus.connectionStatus")!==d.ConnectionStatus.CONNECTED;if(n&&!c){var i=e.props.selectedChat;e.chatClient.sendMessage(i,a),e.element.innerText="",e.setState({message:"",isValidMessage:!1},(function(){e.props.messageSendCallback()}))}},e.handleFormSubmit=function(t){t.preventDefault(),e.handleSendMessageClick()},e.handleKeyPress=function(t){13===(t.which||t.keyCode)&&(t.preventDefault(),e.handleSendMessageClick())},e.handleMessageChange=function(t){e.setState({message:t.target.innerText,isValidMessage:!!t.target.innerText.trim()}),e.props.sendStartTypingStatus(),e.props.sendStopTypingStatus()},e.toggleAttachWidgets=function(){e.setState((function(t){return{showAttachWidgets:!t.showAttachWidgets}}))},e.showProducts=function(t){e.context.modal.show({closeOnEscape:!0,closeOnOverlayClick:!0,closeButton:!0,children:c.createElement(rt,{modalType:t,onSendProducts:e.attachProducts})})},e.attachProducts=function(t){e.setState({showAttachWidgets:!1}),e.context.modal.hide();var a=e.props.selectedChat;t.map((function(t){return e.chatClient.sendWidgetAction(a,Object(I.b)(t))})),e.props.messageSendCallback()},e.state={message:"",isValidMessage:!1,showAttachWidgets:!1},e.chatClient=m.a.getInstance(),e}return e=u,(a=[{key:"componentDidMount",value:function(){this.element.addEventListener("paste",this.handlePaste)}},{key:"componentWillUnmount",value:function(){this.context.modal.hide(),this.element.removeEventListener("paste",this.handlePaste)}},{key:"handlePaste",value:function(t){t.preventDefault();var e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}},{key:"render",value:function(){var t=this,e=this.state,a=e.showAttachWidgets,i=e.isValidMessage,s=o()(this.props,"networkStatus.connectionStatus")!==d.ConnectionStatus.CONNECTED,u=G.c.getBrowsedPids();return c.createElement("div",{className:ot.a["message-input"]},c.createElement("form",{className:ot.a.form,onSubmit:this.handleFormSubmit},c.createElement("div",{className:ot.a["attach-buttons-container"]},c.createElement("button",{type:"button",className:r()(ot.a["img-wrapper"],ot.a.btn),onClick:this.toggleAttachWidgets},c.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzI4NzRGMCIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNyAxNXYtNWgtMnY1aC01djJoNXY1aDJ2LTVoNXYtMnoiLz48L2c+PC9zdmc+",className:r()(ot.a["attach-icon"],lt({},ot.a.rotate,a))})),c.createElement("div",{className:r()(ot.a["attach-buttons"],lt({},ot.a["slide-up-buttons-container"],a))},c.createElement(E.a,{multiple:!0,classNames:{button:ot.a["add-image-thumbnail"]},onAddFiles:this.props.handleAddFiles},c.createElement("div",{id:"upload-image",className:r()(ot.a["attach-button"],lt({},ot.a["fade-in"],a))},c.createElement("div",{className:ot.a["attach-button-img-wrapper"]},c.createElement("img",{className:ot.a["attach-button-img"],src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNMCA0OGg0OFYwSDB6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzI2QTU0MSIgZD0iTTI0IDQ4QzEwLjc0NSA0OCAwIDM3LjI1NSAwIDI0UzEwLjc0NSAwIDI0IDBzMjQgMTAuNzQ1IDI0IDI0LTEwLjc0NSAyNC0yNCAyNCIvPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTMuMiAzMy42aDIxLjZWMTYuOEgxMy4yeiIgbWFzaz0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xMy4yIDI2LjRsNi0zLjYgNC44IDQuOCAzLjYtMi40IDcuMiA3LjItMjEuNiAxLjJ6IiBtYXNrPSJ1cmwoI2IpIi8+PC9nPjwvc3ZnPg=="})),c.createElement(T.a,{anchor:"#upload-image",className:ot.a["select-tooltip"],position:"right"},c.createElement(w.a,{strKey:"chatUploadImage"})))),c.createElement("div",{id:"attach-from-cart",onClick:function(){t.showProducts(n.CART)},className:r()(ot.a["attach-button"],lt({},ot.a["fade-in"],a))},c.createElement("div",{className:ot.a["attach-button-img-wrapper"]},c.createElement("img",{className:ot.a["attach-button-img"],src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjMjg3NEYwIiBkPSJNMjQgNDhDMTAuNzQ1IDQ4IDAgMzcuMjU1IDAgMjRTMTAuNzQ1IDAgMjQgMHMyNCAxMC43NDUgMjQgMjQtMTAuNzQ1IDI0LTI0IDI0Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTMxLjIgMzIuNGEyLjM5NyAyLjM5NyAwIDAgMC0yLjM4OCAyLjRjMCAxLjMyIDEuMDY4IDIuNCAyLjM4OCAyLjQgMS4zMiAwIDIuNC0xLjA4IDIuNC0yLjQgMC0xLjMyLTEuMDgtMi40LTIuNC0yLjR6TTEyIDEzLjJ2Mi40aDIuNGw0LjMyIDkuMTA4LTEuNjIgMi45NGEyLjMyIDIuMzIgMCAwIDAtLjMgMS4xNTJjMCAxLjMyIDEuMDggMi40IDIuNCAyLjRoMTQuNHYtMi40SDE5LjcwNGEuMjk3LjI5NyAwIDAgMS0uMy0uM2wuMDM2LS4xNDQgMS4wOC0xLjk1Nmg4Ljk0Yy45IDAgMS42OTItLjQ5MiAyLjEtMS4yMzZsNC4yOTYtNy43ODhBMS4yMDQgMS4yMDQgMCAwIDAgMzQuOCAxNS42SDE3LjA1MmwtMS4xMjgtMi40SDEyem03LjIgMTkuMmEyLjM5NyAyLjM5NyAwIDAgMC0yLjM4OCAyLjRjMCAxLjMyIDEuMDY4IDIuNCAyLjM4OCAyLjQgMS4zMiAwIDIuNC0xLjA4IDIuNC0yLjQgMC0xLjMyLTEuMDgtMi40LTIuNC0yLjR6Ii8+PC9nPjwvc3ZnPg=="})),c.createElement(T.a,{anchor:"#attach-from-cart",className:ot.a["select-tooltip"],position:"right"},c.createElement(w.a,{strKey:"chatAttachItemFrom",attributes:{from:"Cart"}}))),c.createElement("div",{id:"attach-from-wishlist",onClick:function(){t.showProducts(n.WISHLIST)},className:r()(ot.a["attach-button"],lt({},ot.a["fade-in"],a))},c.createElement("div",{className:ot.a["attach-button-img-wrapper"]},c.createElement("img",{className:ot.a["attach-button-img"],src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNTIiIGhlaWdodD0iNTIiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNMCA1Mmg1MlYwSDB6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iI0ZGNDM0MyIgZD0iTTI2IDUyQzExLjY0IDUyIDAgNDAuMzYgMCAyNlMxMS42NCAwIDI2IDBzMjYgMTEuNjQgMjYgMjYtMTEuNjQgMjYtMjYgMjYiLz48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMTYuOSAzOWgxNS42VjE0LjNIMTYuOXoiIG1hc2s9InVybCgjYikiLz48cGF0aCBmaWxsPSIjRkY0MzQzIiBkPSJNMjcuMyAyMi4xaDEwLjRWMTNIMjcuM3oiIG1hc2s9InVybCgjYikiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMzIuOTczIDE0LjA5N2wtMy4zMTIgMy41NiAyLjgzOSAzLjA1IDMuMzEyLTMuNTU5Yy43ODQtLjg0Mi43ODQtMi4yMDkgMC0zLjA1YTEuOTEgMS45MSAwIDAgMC0yLjgzOSAwIiBtYXNrPSJ1cmwoI2IpIi8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTM1LjMzOSAxNy42NTZsLTMuMzEyLTMuNTZhMS45MSAxLjkxIDAgMCAwLTIuODQgMGMtLjc4NC44NDMtLjc4NCAyLjIxIDAgMy4wNTJsMy4zMTMgMy41NiAyLjgzOS0zLjA1MnpNMjAuOCAyMy40aDcuOHYtMS4zaC03Ljh6bTAgMy45aDcuOFYyNmgtNy44em0wIDMuOWg3Ljh2LTEuM2gtNy44em0wIDMuOWg3Ljh2LTEuM2gtNy44eiIgbWFzaz0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiNGRjQzNDMiIGQ9Ik0xOS41IDI2aDEwLjR2LTEuM0gxOS41em0wIDMuOWgxMC40di0xLjNIMTkuNXptMCAzLjloMTAuNHYtMS4zSDE5LjV6IiBtYXNrPSJ1cmwoI2IpIi8+PC9nPjwvc3ZnPg=="})),c.createElement(T.a,{anchor:"#attach-from-wishlist",className:ot.a["select-tooltip"],position:"right"},c.createElement(w.a,{strKey:"chatAttachItemFrom",attributes:{from:"Wishlist"}}))),u&&0!==u.length&&c.createElement("div",{id:"attach-from-recent",onClick:function(){t.showProducts(n.RECENT)},className:r()(ot.a["attach-button"],lt({},ot.a["fade-in"],a))},c.createElement("div",{className:ot.a["attach-button-img-wrapper"]},c.createElement("img",{className:ot.a["attach-button-img"],src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjQzZDNkM2IiBkPSJNMjQgNDhDMTAuNzQ1IDQ4IDAgMzcuMjU1IDAgMjRTMTAuNzQ1IDAgMjQgMHMyNCAxMC43NDUgMjQgMjQtMTAuNzQ1IDI0LTI0IDI0Ii8+PHBhdGggc3Ryb2tlPSIjRkZGIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMy45NjggMjQuNzY4QzEzLjk2OCAzMC4zMDggMTguNDYgMzQuOCAyNCAzNC44czEwLjAzMi00LjQ5MiAxMC4wMzItMTAuMDMyUzI5LjU0MSAxNC43MzYgMjQgMTQuNzM2Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTE5LjQ0IDE0LjczNmw0LjQ3NyAyLjczNlYxMnoiLz48cGF0aCBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI0IDE5LjI5NlYyNS4ybDQuNTYgNC4xMjgiLz48L2c+PC9zdmc+"})),c.createElement(T.a,{anchor:"#attach-from-recent",className:ot.a["select-tooltip"],position:"right"},c.createElement(w.a,{strKey:"chatAttachItemFrom",attributes:{from:"Recently Viewed"}}))))),!this.state.message&&c.createElement("div",{className:ot.a["input-placeholder"]},"Type a Message..."),c.createElement("div",{ref:this.setRef,className:ot.a.input,contentEditable:!0,onInput:this.handleMessageChange,onKeyPress:this.handleKeyPress}),c.createElement("button",{className:r()(ot.a["img-wrapper"],ot.a.btn),type:"submit",id:"chat-send-icon-btn"},Object(A.j)({fill:s||!i?"#cccccc":"#2874F0"})),s&&c.createElement(P.a,{auto:!1,active:!0,anchor:"#chat-send-icon-btn",position:"top-right",className:ot.a["send-btn-tooltip-text"]},c.createElement(w.a,{strKey:"chatSendNetworkErrorMsg"}))))}}])&&dt(e.prototype,a),i&&dt(e,i),u}(c.Component);gt.contextTypes={modal:p.a.object};var Mt=gt,It=a(555),ft=a(258),Nt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiPjxkZWZzPjxjaXJjbGUgaWQ9ImEiIGN4PSIyMCIgY3k9IjIwIiByPSIyMCIvPjxwYXRoIGlkPSJjIiBkPSJNMCAwaDMxLjY2N3YyMy4zMzNIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48dXNlIGZpbGw9IiNGRkUxMUIiIGZpbGwtcnVsZT0ibm9uemVybyIgeGxpbms6aHJlZj0iI2EiLz48ZyBtYXNrPSJ1cmwoI2IpIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1IDE2LjY2NykiPjxtYXNrIGlkPSJkIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNjIi8+PC9tYXNrPjxwYXRoIGZpbGw9IiMwMjdDRDUiIGQ9Ik0yMS4zOTMgMTcuMTM1aDIuODc4YzEuMDcgMCAxLjc2LS43OTYgMi4wNzgtMi41ODQuMjk5LTEuNzE1LS4wOS0yLjQ4LTEuMTYzLTIuNDhoLTIuODgybC40NTUtMi41NzNjLjUwOC0yLjkzOCAyLjAxOC00LjM4OCA0LjUtNC4zODhoLjQ3M2MxLjM4IDAgMi4xMzQtLjIyOCAyLjI0LS44ODQuMDg1LS40NC0uMDM5LTEuMDQ3LS4xNzctMS43MTUtLjE0Ni0uNjUtLjMwMS0xLjI3OC0uNTIyLTEuNjNDMjguOTM5LjI4NiAyOC4xNzMgMCAyNi45NyAwYy0yLjk4IDAtNS40MzQuODM3LTcuMzY3IDIuNTMtMS45MjQgMS42ODItMy4xNTEgMy45NDQtMy42OTIgNy4wMTNsLS40NjIgMi41MjlIOS40MDJjLS4wOTcgMC02LjM0Ny43MDgtNi4zNDcuNzA4bDUuNzUzLjg4Ni4yMzIuODU0LTMuNTIxLjMgMy43MDEuNTQyLjE0Ni42OTUtMTEuMDMzLjYyczExLjkxLjQ1OCAxMi4wMDUuNDU4aDQuMTkybC0xLjA4MyA2LjE5OGg2Ljg3bDEuMDc2LTYuMTk4eiIgbWFzaz0idXJsKCNkKSIvPjwvZz48L2c+PC9nPjwvc3ZnPg==",jt=a.p+"fk-cp-zion/img/no-chats_0e0d4f.svg",bt=a(1463),St=a.n(bt);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Et(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=wt(t);if(e){var c=wt(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return At(this,a)}}function At(t,e){return!e||"object"!==Ct(e)&&"function"!=typeof e?Tt(t):e}function Tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pt,Ot;!function(t){t.ACTIVE="ACTIVE",t.RESOLVED="RESOLVED",t.ENDED="ENDED"}(Pt||(Pt={})),function(t){t.SELLER="SELLER",t.CUSTOMER_SUPPORT="CUSTOMER_SUPPORT",t.ASSISTANT="ASSISTANT",t.BRAND="BRAND"}(Ot||(Ot={}));var xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(s,t);var e,a,n,i=vt(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this,t)).updateBlockStatus=function(t,a){var n=Object(I.c)();if(n){var c=a.participants.find((function(t){return t.visitorId!==n}));e.chatClient.updateBlockStatus(c.visitorId,t)}},e.chatActions=[{type:"block",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLTQtNGgyNHYyNEgtNHoiLz48cGF0aCBmaWxsPSIjODc4Nzg3IiBkPSJNOC4wODMgMTQuNDIzYzEuNzcxIDAgMy4yOTYtLjYzMyA0LjU3My0xLjg5N0MxMy45MzQgMTEuMjYgMTQuNTczIDkuNzUzIDE0LjU3MyA4YzAtMS41MDItLjQ1Ni0yLjgxNy0xLjM2Ni0zLjk0NEw0LjA5OSAxMy4wN2MxLjEzOC45MDIgMi40NjYgMS4zNTMgMy45ODQgMS4zNTN6TTEuNTkzIDhjMCAxLjUwMi40NTYgMi44MTcgMS4zNjcgMy45NDRsOS4xMDgtOS4wMTRjLTEuMTM4LS45MDItMi40NjctMS4zNTMtMy45ODUtMS4zNTMtMS43NyAwLTMuMjk1LjYzMy00LjU3MyAxLjg5N0MyLjIzMyA0Ljc0IDEuNTk0IDYuMjQ3IDEuNTk0IDh6bTYuNDktOGMyLjIyNyAwIDQuMTMuNzgyIDUuNzEyIDIuMzQ3IDEuNTgxIDEuNTY1IDIuMzcyIDMuNDUgMi4zNzIgNS42NTMgMCAyLjIwMy0uNzkgNC4wODgtMi4zNzIgNS42NTNDMTIuMjE0IDE1LjIxOCAxMC4zMSAxNiA4LjA4MyAxNmMtMi4yMjYgMC00LjEzLS43ODItNS43MTEtMi4zNDdDLjc5IDEyLjA4OCAwIDEwLjIwMyAwIDhjMC0yLjIwMy43OS00LjA4OCAyLjM3Mi01LjY1M0MzLjk1My43ODIgNS44NTcgMCA4LjA4MyAweiIvPjwvZz48L3N2Zz4=",text:"Block",hideAction:function(t){return t.chatType!==Ot.SELLER||e.isChatBlocked(t)},handleActionClick:e.updateBlockStatus.bind(Tt(e),d.BlockStatus.BLOCK)},{type:"unblock",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxNiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLTYtNGgyNHYyNEgtNnoiLz48cGF0aCBmaWxsPSIjODc4Nzg3IiBkPSJNMTEgOGEuOTYuOTYgMCAwIDEgLjcwOC4yOTJBLjk2Ljk2IDAgMCAxIDEyIDl2NmEuOTY0Ljk2NCAwIDAgMS0uMjkyLjcwOEEuOTY0Ljk2NCAwIDAgMSAxMSAxNkgxYS45NjQuOTY0IDAgMCAxLS43MDgtLjI5MkEuOTY0Ljk2NCAwIDAgMSAwIDE1VjlhLjk2Ljk2IDAgMCAxIC4yOTItLjcwOEEuOTY0Ljk2NCAwIDAgMSAxIDhoLjMzM1Y0LjY2N2MwLTEuMjg1LjQ1Ny0yLjM4NCAxLjM3LTMuMjk3QzMuNjE2LjQ1NyA0LjcxNSAwIDYgMGMxLjI4NSAwIDIuMzg0LjQ1NyAzLjI5NyAxLjM3LjkxMy45MTMgMS4zNyAyLjAxMiAxLjM3IDMuMjk3YS42NC42NCAwIDAgMS0uMTk4LjQ2OC42NC42NCAwIDAgMS0uNDY5LjE5OGgtLjY2N2EuNjQuNjQgMCAwIDEtLjQ2OC0uMTk4LjY0LjY0IDAgMCAxLS4xOTgtLjQ2OCAyLjU3IDIuNTcgMCAwIDAtLjc4Mi0xLjg4NkEyLjU3IDIuNTcgMCAwIDAgNiAyYTIuNTcgMi41NyAwIDAgMC0xLjg4NS43ODEgMi41NyAyLjU3IDAgMCAwLS43ODIgMS44ODZWOEgxMXoiLz48L2c+PC9zdmc+",text:"Unblock",hideAction:function(t){return t.chatType!==Ot.SELLER||!e.isChatBlocked(t)},handleActionClick:e.updateBlockStatus.bind(Tt(e),d.BlockStatus.UNBLOCK)}],e.setVisibleFlag=function(){e.setState({isVisible:!0})},e.unsetVisibleFlag=function(){e.setState({isVisible:!1})},e.sendTypingStatus=function(t){var a=t?d.TypingStatus.STARTED:d.TypingStatus.STOPPED;e.chatClient.sendTypingStatus(e.state.selectedChat,a)},e.sendStartTypingStatus=l()(e.sendTypingStatus.bind(Tt(e),!0),300,{leading:!0,trailing:!1}),e.sendStopTypingStatus=l()(e.sendTypingStatus.bind(Tt(e),!1),300,{leading:!1,trailing:!0}),e.fetchProductSummaryAndSendProductShareWidget=function(t,a){e.props.fetchProductSummary([{productId:a}]).then((function(n){var c=o()(n,["0","data",a,"value"]);c&&e.chatClient.sendWidgetAction(t,Object(I.b)(c))}))},e.fetchChatMessages=function(t,a){e.chatClient.fetchChatMessages(t,a,25,(function(t){e.handleChatStartError(t)}))},e.handleChatStartError=function(t,a,n){if(t&&t.statusCode>=400){var c=o()(e.props,"allChats.chatMetas"),i=o()(c,[0,"chatId"]);if(a===Ot.BRAND&&n){var r=JSON.parse(n);S.a.trackLink({products:r.products},"BrandChat_Error")}i?e.handleChatSelect(i):e.context.router.push("/my-chats")}},e.setRef=function(t){e.chatMessagesContainerRef=t},e.innerRefScrollAnchor=function(t){e.scrollAnchor=t},e.scrollToBottom=function(){e.scrollAnchor&&e.scrollAnchor.scrollIntoView({behavior:"smooth"})},e.reOpenChat=function(t){e.chatClient.issueChatAction(t,"REOPEN")},e.renderMessageInput=function(t,a,n,i){switch(t){case Pt.ENDED:return c.createElement("div",{className:r()(St.a["chat-meta-message-container"],St.a["chat-meta-ended-message-container"])},c.createElement(L.a,{className:St.a["chat-meta-message"],attributes:{displayName:a},strKey:"chatInactiveMessage"}));case Pt.RESOLVED:return c.createElement("div",{className:St.a["chat-meta-message-container"]},c.createElement(L.a,{className:St.a["chat-meta-message"],attributes:{displayName:a},strKey:"chatResolvedMessage"}),c.createElement(D.a,{className:St.a["chat-action-btn"],primary:!0,onClick:function(){e.reOpenChat(n.chatId)}},Object(L.d)("chatStartChatAgainCta")));default:return c.createElement(Mt,{handleAddFiles:i,networkStatus:e.props.networkStatus,sendStartTypingStatus:e.sendStartTypingStatus,sendStopTypingStatus:e.sendStopTypingStatus,messageSendCallback:e.scrollToBottom,selectedChat:e.state.selectedChat})}},e.getValidSelectedFiles=function(t){for(var a=[],n=0;n<t.length;n++){var c=t[n];c.size<=5242880?a.push(c):e.props.toast.show(M.maxFileSizeError)}return a},e.onFilesAdd=function(t){t.forEach((function(t){e.chatClient.createTempImageUploadFrame(e.state.selectedChat,t.id)}))},e.handleFileUploadSuccess=function(t){e.chatClient.sendImageWidgetAction(e.state.selectedChat,{type:"image",serverPath:"https://blobio.flipkart.net/v1/sc?resourceId=".concat(t.resourceId),resourceId:t.resourceId},t.id)},e.isChatBlocked=function(t){var e=Object(I.c)(),a=(t.participants||[]).find((function(t){return t.visitorId===e}));return!!a&&"BLOCKED"===a.state},e.state={selectedChat:"",isTyping:!1,isVisible:document.hasFocus()},e.chatClient=m.a.getInstance(),e}return e=s,(a=[{key:"componentDidMount",value:function(){var t,e=o()(this.props,"params.chatId"),a=o()(this.props,["location","query","contextId"]),n=o()(this.props,["location","query","chatType"]),c=o()(this.props,"allChats.chatMetas");C.a.setNavigationContext({pn:"My Chat",pt:"My Chat"}),C.a.trackPageView();var i=Object(b.b)("chatStartContext");if(i&&(t=JSON.stringify(i)),n&&t)this.handleChatByType(n,a,t);else if(!e&&c.length){var r=c[0].chatId;this.handleChatSelect(r)}else e&&this.handleChatSelect(e);window.addEventListener("blur",this.unsetVisibleFlag),window.addEventListener("focus",this.setVisibleFlag)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("blur",this.unsetVisibleFlag),window.removeEventListener("focus",this.setVisibleFlag)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=o()(this.props,"params.chatId"),a=o()(t,"params.chatId"),n=o()(this.props,"allChats.chatMetas"),c=o()(t,"allChats.chatMetas");if(a||n.length||!c.length)a&&a!==e&&this.handleChatSelect(a);else{var i=c[0].chatId;this.handleChatSelect(i)}}},{key:"handleChatByType",value:function(t,e,a){var n=this;this.chatClient.startChat(t,void 0,e,a,(function(e){e&&("ACK"===e.type?(e.statusCode>=400&&n.props.toast.show(M.genericError),n.handleChatStartError(e,t,a)):n.chatClient.fetchAllChats((function(){var c=e.chatId;if(a&&Object(b.d)("chatStartContext"),n.context.router.replace("/my-chats/".concat(c)),n.handleChatSelect(c),t===Ot.BRAND&&a){var i=JSON.parse(a),r=o()(i,"features.pid");r&&n.fetchProductSummaryAndSendProductShareWidget(c,r)}})))}))}},{key:"handleChatSelect",value:function(t){this.context.router.replace({pathname:"/my-chats/".concat(t)}),this.setState({selectedChat:t})}},{key:"handleChatActionClick",value:function(t){return t}},{key:"render",value:function(){var t=this,e=o()(this.props,"allChats.chatMetas"),a=o()(this.props,"allChats.messageSummary.latestChatMessageIdentifiers"),n=o()(this.props,"allChats.messageSummary.lastReadMessageIdentifiers"),i=Object(j.f)(this.props.allChats)&&0===e.length,s=e.find((function(e){return e.chatId===t.state.selectedChat}))||{},u=this.isChatBlocked(s),l=s.chatState,m=s.displayName,h=s.imageUrl,p=Object(I.c)(),y=p&&(s.participants||[]).filter((function(t){return t.visitorId!==p}))||{},g=0,M=0;y.forEach((function(t){t.lastDeliveredMessageTimestamp>M&&(M=t.lastDeliveredMessageTimestamp),t.lastReadMessageTimestamp>g&&(g=t.lastReadMessageTimestamp)}));var b=this.chatActions.map((function(t,e){return t.hideAction&&t.hideAction(s)?null:c.createElement("div",{className:St.a["list-item"],key:e,onClick:function(){t.handleActionClick(s)}},c.createElement("div",{className:St.a["list-item-icon-container"]},c.createElement("img",{src:t.icon})),c.createElement("div",{className:St.a["list-item-text"]},t.text))})).filter((function(t){return!!t}));return c.createElement(E.b,{onFileUploadSuccess:this.handleFileUploadSuccess,onFilesAdd:this.onFilesAdd,getValidSelectedFiles:this.getValidSelectedFiles,autoUpload:!0,oneShot:!0,maxFilesAllowed:4,render:function(o){var p=o.handleAddFiles,y=o.files,I=o.retryUpload;return c.createElement(c.Fragment,null,c.createElement("div",{className:St.a.chat},c.createElement("div",{className:St.a.container},c.createElement("div",{className:r()(St.a["chat-list"],Lt({},St.a["chat-list-no-chats"],i))},c.createElement("div",{className:St.a["chat-list-title"]},c.createElement(L.a,{strKey:"chatAllChatsTitle"})),i?c.createElement("div",{className:St.a["no-chats"]},c.createElement("img",{className:St.a["no-chats-illustration"],src:jt}),c.createElement(L.a,{className:St.a["no-chats-title"],strKey:"chatNoChatsTitle"}),c.createElement(L.a,{className:St.a["no-chats-subtitle"],strKey:"chatNoChatsSubtitle"})):c.createElement("div",{className:St.a["chat-list-items"]},e.map((function(e,i){var s,o,u=e.displayName,l=e.imageUrl,m=e.subject,h=(a||[]).find((function(t){return t.chatId===e.chatId}))||{},p=(n||[]).find((function(t){return t.chatId===e.chatId}))||{};if(h.body){var y=Object(d.ab2str)(new Uint8Array(h.body));try{o=JSON.parse(y).contents}catch(t){return!1}}var g=p.unreadCount,M=g>0;return c.createElement("div",{className:r()(St.a["chat-list-item"],(s={},Lt(s,St.a.selected,t.state.selectedChat===e.chatId),Lt(s,St.a["unread-messages"],M),s)),onClick:function(){t.handleChatSelect(e.chatId)},key:i},c.createElement("div",{className:St.a["visitor-profile-picture-wrapper"]},c.createElement(z.a,{src:Object(f.c)(l,"300","70")||Nt,containerClass:St.a["visitor-profile-picture"],size:75,lazyLoadEnable:!0})),c.createElement("div",{className:St.a["chat-list-item-content"]},c.createElement("div",{className:r()(St.a["display-name"],St.a["trucate-text"])},u),c.createElement("div",{className:r()(St.a.subject,St.a["truncate-text"])},m),o&&c.createElement("div",{className:r()(St.a["truncate-text"],St.a["last-message-snippet"])},o)),c.createElement("div",{className:St.a["time-and-message-count-container"]},c.createElement("div",{className:St.a["relative-time"]},Object(N.c)(h.timestamp)),M&&c.createElement("div",{className:St.a["unread-message-count"]},g)))})))),!i&&c.createElement("div",{className:St.a["chat-messages"]},c.createElement("div",{className:St.a["visitor-details"]},c.createElement("div",{className:St.a["visitor-profile-picture-wrapper"]},c.createElement(z.a,{src:Object(f.c)(h,"300","70")||Nt,containerClass:St.a["visitor-profile-picture"],size:75,lazyLoadEnable:!0})),c.createElement("div",{className:St.a["visitor-name"]},m),b.length>0&&c.createElement("div",{className:St.a["pop-over-menu-open-btn-container"]},c.createElement("div",{className:St.a["pop-over-menu-open-btn"]},c.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjE2Ij48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0tMTgtMTJoNDB2NDBoLTQweiIvPjxwYXRoIGZpbGw9IiM4Nzg3ODciIGQ9Ik0yIDEyYy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMm0wLTZDLjkgNiAwIDYuOSAwIDhzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJtMC0yYzEuMSAwIDItLjkgMi0ycy0uOS0yLTItMi0yIC45LTIgMiAuOSAyIDIgMiIvPjwvZz48L3N2Zz4="}),c.createElement(v.a,{className:St.a["pop-over-menu"]},b)))),c.createElement("div",{className:St.a["message-container"]},t.state.selectedChat&&c.createElement(It.a,{retryUpload:I,files:y,innerRefScrollAnchor:t.innerRefScrollAnchor,chatDisabled:l===Pt.ENDED||l===Pt.RESOLVED,lastReadMessageTimestamp:g,lastDeliveredMessageTimestamp:M,isVisible:t.state.isVisible,isTyping:s.isTyping,messageSendCallback:t.scrollToBottom,fetchChatMessages:t.fetchChatMessages,innerRef:t.setRef,selectedChat:t.state.selectedChat,key:t.state.selectedChat,selectedChatMeta:s}),u?c.createElement("div",{className:St.a["chat-meta-message-container"]},c.createElement(L.a,{className:St.a["chat-meta-message"],attributes:{displayName:m},strKey:"chatBlockedMessage"}),c.createElement(D.a,{className:St.a["chat-action-btn"],primary:!0,onClick:function(){t.updateBlockStatus(d.BlockStatus.UNBLOCK,s)}},Object(L.d)("chatUnblockCta"))):t.renderMessageInput(l,m,s,p))))))}})}}])&&Et(e.prototype,a),n&&Et(e,n),s}(c.Component);xt.contextTypes={router:p.a.object};e.b=Object(g.a)((function(t){return{allChats:t.allChats,networkStatus:t.networkStatus}}),{})(Object(y.e)(Object(ft.a)(xt)))},1461:function(t,e,a){t.exports={"add-product-modal":"_1sJvF8",title:"_1bxHmu","products-container":"_33cVR9","product-container":"vvzZxu","btn-send":"HTPOw_",product:"SCnYlf","product-checkbox":"_216yHt",details:"_13RlmI","main-title":"_2Kdslz","product-image":"_1JNzZb","product-buyability":"_1CUUPB","load-more":"_23h3CK","loader-state":"qnZBk3","error-state":"_2pRUy6","empty-product-list-modal":"_3-JKXf","empty-product-list":"_3BHHl8","empty-product-list-image":"_2Qqidw","empty-product-list-text":"_1R1LNj","empty-product-list-subtext":"_1dRnmZ",grayscale:"_2GjWhi"}},1462:function(t,e,a){t.exports={"message-input":"_1HxTaC",form:"_2YOwxu",input:"y0cM-Y","input-placeholder":"_29cYbp",btn:"_7-sJDM","send-btn-tooltip-text":"_23EvYh","img-wrapper":"HGDRK3","attach-icon":"_1NbL8c",rotate:"_3E7Hk9","attach-buttons-container":"_2ZX9Ci","attach-buttons":"Tufw2B","attach-button":"_1VZBEe","attach-button-img-wrapper":"_20lE0S","attach-button-img":"_3oEO9j","slide-up-buttons-container":"_3DuCXx","fade-in":"_35Y-BC"}},1463:function(t,e,a){t.exports={chat:"r9DsrL",container:"_3TEghh","chat-list":"_1VxqAE","chat-list-no-chats":"_1gL_hU","chat-list-title":"jXdjIv","no-chats":"_3p-6t3","no-chats-illustration":"_1VK2IZ","no-chats-title":"_1hyZB6","no-chats-subtitle":"_3ksOg6","chat-with-bot-cta":"_3u7qUN","chat-list-items":"_3Rm1WH","chat-list-item":"_2KhADQ","time-and-message-count-container":"_6EK4Wf","relative-time":"idKEz2","unread-message-count":"eYMF8G","chat-list-item-content":"_230g8N",selected:"k8euSc","unread-messages":"F51cZ3","display-name":"_1XaRnZ",subject:"_3eU4Ae","chat-messages":"_1vSS61","message-container":"_2vTgJ0","visitor-details":"_6PMfnb","visitor-name":"_3lwMnI","pop-over-menu-open-btn-container":"_2HWEwN","pop-over-menu-open-btn":"_22ET0r","pop-over-menu":"_2wE5N6","list-item":"JTsn9y","list-item-icon-container":"_20_rMh","visitor-profile-picture-wrapper":"bfaZqL","visitor-profile-picture":"gXa0so","chat-meta-message-container":"_33QojL","chat-meta-ended-message-container":"-YYm0G","chat-meta-message":"oF_nT0","chat-action-btn":"IoYDkB","truncate-text":"_3PpMRw","last-message-snippet":"_1YY92V",blink:"tHlgZ2"}},2629:function(t,e,a){t.exports={"chat-container":"_3NQ8g7","start-chat-button":"_2KgQLr","chat-icon":"_2Uyi0H","chat-container-with-compare":"qgonxz"}}}]);